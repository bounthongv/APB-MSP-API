setup mssql driver on ubuntu

 1. Check if Driver is already installed
  First, check if you already have ODBC drivers configured:
   1 odbcinst -j
  Then list the installed drivers:
   1 cat /etc/odbcinst.ini
  If you see `[ODBC Driver 17 for SQL Server]` or `[ODBC Driver 18 for SQL Server]`, you are already set.

  if obdbcinst.ini not yet, means odbc not yet installed.

 Please run these commands in order to install the driver. Note the corrected curl command (you must use curl to fetch the key, not just type the URL).

  1. Import the Microsoft GPG Key

   1 curl -fsSL https://packages.microsoft.com/keys/microsoft.asc | sudo gpg --dearmor -o /usr/share/keyrings/microsoft-prod.gpg

  2. Register the Microsoft Ubuntu 24.04 Repository

   1 curl -fsSL https://packages.microsoft.com/config/ubuntu/24.04/prod.list | sudo tee /etc/apt/sources.list.d/mssql-release.list

  3. Install the Driver
   1 sudo apt-get update
   2 sudo ACCEPT_EULA=Y apt-get install -y msodbcsql18
  (Note: I am recommending Version 18 as it is the standard for Ubuntu 24.04, but it works exactly the same as 17 for our Python script).

  4. Install Optional Tools (useful for testing)

   1 sudo ACCEPT_EULA=Y apt-get install -y mssql-tools18 unixodbc-dev
   2 echo 'export PATH="$PATH:/opt/mssql-tools18/bin"' >> ~/.bashrc
   3 source ~/.bashrc

  5. Verify the installation
  Now check the file again:
   1 cat /etc/odbcinst.ini
  You should now see [ODBC Driver 18 for SQL Server].

  Once this is done, let me know and we can write the Python sync script!


  after the installation, it should look like this:

  root@APISAPI:~# cat /etc/odbcinst.ini
[ODBC Driver 18 for SQL Server]
Description=Microsoft ODBC Driver 18 for SQL Server
Driver=/opt/microsoft/msodbcsql18/lib64/libmsodbcsql-18.6.so.1.1
UsageCount=1

but there is security concern: 

Yes, ODBC Driver 18 is fully compatible with SQL Server 2019 and SQL Server 2022.

  However, there is one very important change in Driver 18 that you must know, otherwise your connection will likely fail with an "SSL Provider" error:

  The "Encryption" Change
  In ODBC Driver 18, encryption is turned ON by default. 
  If your SQL Server (2019 or 2022) does not have a valid SSL certificate installed (which is common for internal servers), you must add two extra parameters to
  your connection string in Python.

  Example Connection String for Python (pyodbc)
  When we write the script, your connection string should look like this to ensure it works with Driver 18:

   1 conn_str = (
   2     "DRIVER={ODBC Driver 18 for SQL Server};"
   3     "SERVER=10.151.x.x;" # Your customer's IP
   4     "DATABASE=YourDatabase;"
   5     "UID=YourUser;"
   6     "PWD=YourPassword;"
   7     "Encrypt=yes;"
   8     "TrustServerCertificate=yes;" # <--- CRITICAL for Driver 18 if no SSL cert
   9 )

   